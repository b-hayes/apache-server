<VirtualHost *>
    ServerName localhost
    DocumentRoot "/var/www/html"

    <Directory "/var/www/html">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On

    # Do not use this for production servers.
    # This is an alternative appraoch for local development machines only,
    # allowing you to use basic repo folder names instead of full domain names for folders.

    # app.localhost OR app.com OR www.app.com = {DocumentRoot}/app
    RewriteCond %{HTTP_HOST} ^www\.([^.]+)\.([^.]+)$ [OR]
    RewriteCond %{HTTP_HOST} ^([^.]+)\.([^.]+)$ [NC]
    RewriteRule ^(.*)$ /%1/$1 [L]

    # sub.app.localhost OR sub.app.com = {DocumentRoot}/app/sub
    RewriteCond %{HTTP_HOST} ^([^.]+)\.([^.]+)\.([^.]+)$ [NC]
    RewriteRule ^(.*)$ /%2/%1/$1 [L]

</VirtualHost>
